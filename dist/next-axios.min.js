/*!
 * name: @feizheng/next-axios
 * url: https://github.com/afeiship/next-axios
 * version: 2.0.3
 * date: 2020-01-07T06:48:18.220Z
 * license: MIT
 */
!function(){var e=e||window||self||Function("return this")(),t=e.axios||require("axios"),n=e.nx||require("@feizheng/next-js-core2"),r=n.contentType||require("@feizheng/next-content-type"),s=n.stubSingleton||require("@feizheng/next-stub-singleton"),o=t.CancelToken,u=n.declare("nx.Axios",{statics:n.mix(null,s()),methods:{axios:t,init:function(){this.setDefaults(),this.setRequestInterceptor(),this.setResponseInterceptor()},setDefaults:function(e){var r=this.headers(),s=e||{baseURL:"./",timeout:3e4,headers:{common:r,get:r,post:r,delete:r,put:r,patch:r,head:r}};n.mix(t.defaults,s)},setRequestInterceptor:function(){},setResponseInterceptor:function(){var e=this;t.interceptors.response.use(function(t){return e.isSuccess(t)?e.success(t):(e.error(t),Promise.reject(t))},function(t){return e.error(t),Promise.reject(t)})},headers:function(){return{"Content-Type":r("json")}},success:function(e){return this.toData(e)},error:function(e){console.log("[nx.Axios]: Please implment the method!",e)},toData:function(e){return e},isSuccess:function(e){return!e.errorCode},request:function(e){var r=e.resource,s=o.source(),u=r?{cancelToken:s.token}:null,i=n.mix(u,e);return r&&n.set(r[0],r[1],{destroy:s.cancel}),t.request(i)},"get,delete,head,post,put,patch":function(e){return function(t,r,s){const o="get"===e?{params:r}:{data:r};return this.request(n.mix({method:e,url:t},o,s))}}}});"undefined"!=typeof module&&module.exports&&(module.exports=u)}();